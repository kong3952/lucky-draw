<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üéâ Lucky Draw</title>
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600;700;900&family=Sarabun:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --gold: #f5c518;
    --gold2: #ffdd57;
    --dark: #0d0d1a;
    --dark2: #141428;
    --card: #1a1a35;
    --accent: #e040fb;
    --accent2: #7c4dff;
    --green: #00e676;
    --red: #ff5252;
    --text: #f0f0ff;
    --muted: #888aaa;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--dark);
    color: var(--text);
    font-family: 'Sarabun', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Animated star background */
  .stars {
    position: fixed; inset: 0; pointer-events: none; z-index: 0;
    background:
      radial-gradient(ellipse at 20% 50%, rgba(124,77,255,0.15) 0%, transparent 60%),
      radial-gradient(ellipse at 80% 20%, rgba(224,64,251,0.1) 0%, transparent 50%),
      radial-gradient(ellipse at 50% 80%, rgba(245,197,24,0.08) 0%, transparent 50%),
      var(--dark);
  }
  .stars::before {
    content: '';
    position: absolute; inset: 0;
    background-image:
      radial-gradient(1px 1px at 10% 15%, white 0%, transparent 100%),
      radial-gradient(1px 1px at 25% 40%, white 0%, transparent 100%),
      radial-gradient(1.5px 1.5px at 50% 10%, white 0%, transparent 100%),
      radial-gradient(1px 1px at 70% 30%, white 0%, transparent 100%),
      radial-gradient(1px 1px at 85% 55%, white 0%, transparent 100%),
      radial-gradient(1px 1px at 35% 70%, white 0%, transparent 100%),
      radial-gradient(1.5px 1.5px at 60% 85%, white 0%, transparent 100%),
      radial-gradient(1px 1px at 90% 75%, white 0%, transparent 100%),
      radial-gradient(1px 1px at 15% 90%, white 0%, transparent 100%),
      radial-gradient(1px 1px at 45% 55%, rgba(255,255,255,0.6) 0%, transparent 100%);
    animation: twinkle 4s infinite alternate;
    opacity: 0.6;
  }
  @keyframes twinkle {
    0% { opacity: 0.4; }
    100% { opacity: 0.8; }
  }

  .container {
    position: relative; z-index: 1;
    max-width: 900px;
    margin: 0 auto;
    padding: 32px 20px 60px;
  }

  /* Header */
  header {
    text-align: center;
    margin-bottom: 40px;
    animation: fadeDown 0.8s ease;
  }
  @keyframes fadeDown {
    from { opacity: 0; transform: translateY(-30px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .header-emoji { font-size: 52px; display: block; margin-bottom: 8px; }
  header h1 {
    font-family: 'Kanit', sans-serif;
    font-size: clamp(28px, 6vw, 52px);
    font-weight: 900;
    background: linear-gradient(135deg, var(--gold), var(--accent), var(--gold2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1.1;
    text-shadow: none;
    letter-spacing: -0.5px;
  }
  header p { color: var(--muted); margin-top: 8px; font-size: 15px; }

  /* Tabs */
  .tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 28px;
    background: var(--card);
    padding: 6px;
    border-radius: 14px;
    border: 1px solid rgba(255,255,255,0.07);
  }
  .tab {
    flex: 1; padding: 10px;
    border: none; background: transparent;
    color: var(--muted); cursor: pointer;
    font-family: 'Kanit', sans-serif;
    font-size: 15px; font-weight: 600;
    border-radius: 10px;
    transition: all 0.25s;
  }
  .tab.active {
    background: linear-gradient(135deg, var(--accent2), var(--accent));
    color: white;
    box-shadow: 0 4px 20px rgba(124,77,255,0.4);
  }
  .tab:not(.active):hover { color: var(--text); background: rgba(255,255,255,0.05); }

  /* Panels */
  .panel { display: none; animation: fadeIn 0.3s ease; }
  .panel.active { display: block; }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Card */
  .card {
    background: var(--card);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 18px;
    padding: 24px;
    margin-bottom: 20px;
  }
  .card-title {
    font-family: 'Kanit', sans-serif;
    font-size: 17px; font-weight: 700;
    color: var(--gold);
    margin-bottom: 16px;
    display: flex; align-items: center; gap: 8px;
  }

  /* Form elements */
  label { display: block; color: var(--muted); font-size: 13px; margin-bottom: 6px; }
  textarea, input[type="text"] {
    width: 100%;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 10px;
    padding: 12px 14px;
    color: var(--text);
    font-family: 'Sarabun', sans-serif;
    font-size: 14px;
    resize: vertical;
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
  }
  textarea:focus, input[type="text"]:focus {
    border-color: var(--accent2);
    box-shadow: 0 0 0 3px rgba(124,77,255,0.2);
  }
  textarea { min-height: 160px; }

  .input-row { display: flex; gap: 10px; margin-bottom: 12px; }
  .input-row input { flex: 1; }

  .btn {
    padding: 12px 24px;
    border: none; border-radius: 10px;
    font-family: 'Kanit', sans-serif;
    font-size: 15px; font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
  }
  .btn-primary {
    background: linear-gradient(135deg, var(--accent2), var(--accent));
    color: white;
    box-shadow: 0 4px 20px rgba(124,77,255,0.35);
  }
  .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 28px rgba(124,77,255,0.5); }
  .btn-primary:active { transform: translateY(0); }
  .btn-danger {
    background: rgba(255,82,82,0.15);
    color: var(--red);
    border: 1px solid rgba(255,82,82,0.3);
  }
  .btn-danger:hover { background: rgba(255,82,82,0.25); }
  .btn-gold {
    background: linear-gradient(135deg, #e6a800, var(--gold));
    color: #1a0f00;
    box-shadow: 0 4px 20px rgba(245,197,24,0.35);
    font-size: 18px;
    padding: 16px 40px;
  }
  .btn-gold:hover { transform: translateY(-2px); box-shadow: 0 8px 32px rgba(245,197,24,0.5); }
  .btn-gold:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }

  /* Stats row */
  .stats-row {
    display: flex; gap: 12px; margin-bottom: 20px;
    flex-wrap: wrap;
  }
  .stat-box {
    flex: 1; min-width: 100px;
    background: var(--card);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 12px;
    padding: 14px 16px;
    text-align: center;
  }
  .stat-num {
    font-family: 'Kanit', sans-serif;
    font-size: 28px; font-weight: 900;
  }
  .stat-num.gold { color: var(--gold); }
  .stat-num.green { color: var(--green); }
  .stat-num.red { color: var(--red); }
  .stat-label { font-size: 12px; color: var(--muted); margin-top: 2px; }

  /* Draw area */
  .draw-section { text-align: center; padding: 20px 0; }

  /* Slot machine display */
  .slot-display {
    background: linear-gradient(135deg, #0a0a1f, #12122a);
    border: 3px solid rgba(245,197,24,0.4);
    border-radius: 20px;
    padding: 32px 24px;
    margin: 24px 0;
    position: relative;
    overflow: hidden;
    box-shadow: 0 0 40px rgba(245,197,24,0.1), inset 0 0 40px rgba(0,0,0,0.3);
    min-height: 140px;
    display: flex; align-items: center; justify-content: center;
  }
  .slot-display::before {
    content: '';
    position: absolute; inset: 0;
    background: linear-gradient(135deg, rgba(124,77,255,0.05), transparent 50%, rgba(245,197,24,0.05));
    pointer-events: none;
  }

  .slot-text {
    font-family: 'Kanit', sans-serif;
    font-size: clamp(20px, 5vw, 36px);
    font-weight: 900;
    color: var(--gold2);
    text-align: center;
    letter-spacing: 2px;
    word-break: break-all;
    line-height: 1.3;
    text-shadow: 0 0 30px rgba(245,197,24,0.5);
  }
  .slot-text.rolling {
    animation: rolling 0.08s linear infinite;
    color: var(--muted);
    text-shadow: none;
  }
  @keyframes rolling {
    0% { transform: translateY(-4px); opacity: 0.5; }
    50% { transform: translateY(4px); opacity: 1; }
    100% { transform: translateY(-4px); opacity: 0.5; }
  }
  .slot-text.winner {
    animation: winnerPop 0.5s cubic-bezier(0.175,0.885,0.32,1.275);
    color: var(--gold2);
    text-shadow: 0 0 40px rgba(245,197,24,0.8);
  }
  @keyframes winnerPop {
    0% { transform: scale(0.5); opacity: 0; }
    70% { transform: scale(1.1); }
    100% { transform: scale(1); opacity: 1; }
  }
  .slot-idle { color: var(--muted); font-size: 16px; font-family: 'Sarabun', sans-serif; font-weight: 400; }

  /* Prize selector */
  .prize-selector {
    display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; justify-content: center;
  }
  .prize-chip {
    padding: 8px 18px;
    border-radius: 50px;
    border: 2px solid rgba(255,255,255,0.1);
    background: transparent;
    color: var(--muted);
    cursor: pointer;
    font-family: 'Kanit', sans-serif;
    font-size: 14px; font-weight: 600;
    transition: all 0.2s;
  }
  .prize-chip.selected {
    border-color: var(--gold);
    background: rgba(245,197,24,0.12);
    color: var(--gold);
    box-shadow: 0 0 12px rgba(245,197,24,0.2);
  }
  .prize-chip:hover:not(.selected) { border-color: rgba(255,255,255,0.3); color: var(--text); }

  /* Confetti */
  .confetti-container {
    position: fixed; inset: 0; pointer-events: none; z-index: 999;
  }
  .confetti-piece {
    position: absolute;
    width: 10px; height: 10px;
    top: -20px;
    animation: confettiFall linear forwards;
    border-radius: 2px;
  }
  @keyframes confettiFall {
    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
  }

  /* Winners list */
  .winners-list { display: flex; flex-direction: column; gap: 10px; }
  .winner-item {
    display: flex; align-items: center; gap: 12px;
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.07);
    border-radius: 12px;
    padding: 12px 16px;
    animation: slideIn 0.3s ease;
  }
  @keyframes slideIn {
    from { opacity: 0; transform: translateX(-20px); }
    to { opacity: 1; transform: translateX(0); }
  }
  .winner-rank {
    font-family: 'Kanit', sans-serif;
    font-weight: 900; font-size: 18px;
    min-width: 32px; text-align: center;
  }
  .winner-info { flex: 1; }
  .winner-name {
    font-family: 'Kanit', sans-serif;
    font-size: 16px; font-weight: 700;
  }
  .winner-prize {
    font-size: 13px; color: var(--muted); margin-top: 2px;
  }
  .winner-time { font-size: 12px; color: var(--muted); }
  .badge {
    padding: 4px 12px; border-radius: 50px;
    font-family: 'Kanit', sans-serif;
    font-size: 12px; font-weight: 700;
  }
  .badge-gold { background: rgba(245,197,24,0.15); color: var(--gold); border: 1px solid rgba(245,197,24,0.3); }
  .badge-silver { background: rgba(200,210,220,0.1); color: #c8d2dc; border: 1px solid rgba(200,210,220,0.2); }
  .badge-bronze { background: rgba(205,127,50,0.15); color: #cd7f32; border: 1px solid rgba(205,127,50,0.3); }

  /* Participants list */
  .participants-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 8px;
    max-height: 300px;
    overflow-y: auto;
    padding-right: 4px;
  }
  .participants-grid::-webkit-scrollbar { width: 4px; }
  .participants-grid::-webkit-scrollbar-track { background: transparent; }
  .participants-grid::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 4px; }

  .participant-chip {
    display: flex; align-items: center; justify-content: space-between;
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.07);
    border-radius: 8px;
    padding: 8px 12px;
    font-size: 13px;
    transition: all 0.2s;
  }
  .participant-chip.won {
    background: rgba(245,197,24,0.08);
    border-color: rgba(245,197,24,0.2);
    color: var(--gold);
    text-decoration: line-through;
    opacity: 0.6;
  }
  .participant-chip .remove-btn {
    background: none; border: none; color: var(--muted);
    cursor: pointer; font-size: 16px; line-height: 1;
    padding: 0 0 0 8px;
    transition: color 0.2s;
  }
  .participant-chip .remove-btn:hover { color: var(--red); }

  .empty-state {
    text-align: center; padding: 40px 20px;
    color: var(--muted);
  }
  .empty-state .emoji { font-size: 40px; display: block; margin-bottom: 12px; }

  .divider { height: 1px; background: rgba(255,255,255,0.07); margin: 20px 0; }

  /* Responsive */
  @media (max-width: 480px) {
    .stats-row { gap: 8px; }
    .stat-box { padding: 10px 12px; }
    .stat-num { font-size: 22px; }
  }
</style>
</head>
<body>

<div class="stars"></div>
<div class="confetti-container" id="confettiContainer"></div>

<div class="container">
  <header>
    <span class="header-emoji">üéâ</span>
    <h1>‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</h1>
    <p>Lucky Draw System ‚Äî ‡∏™‡∏∏‡πà‡∏°‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏¢‡∏∏‡∏ï‡∏¥‡∏ò‡∏£‡∏£‡∏° ‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥ ‡πÑ‡∏°‡πà‡πÄ‡∏≠‡∏≤‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö</p>
  </header>

  <!-- Tabs -->
  <div class="tabs">
    <button class="tab active" onclick="switchTab('setup')">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
    <button class="tab" onclick="switchTab('draw')">üé≤ ‡∏™‡∏∏‡πà‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</button>
    <button class="tab" onclick="switchTab('winners')">üèÜ ‡∏ú‡∏π‡πâ‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ</button>
  </div>

  <!-- SETUP PANEL -->
  <div class="panel active" id="panel-setup">

    <!-- Add participants -->
    <div class="card">
      <div class="card-title">üë• ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</div>
      <div class="input-row">
        <input type="text" id="nameInput" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°..." onkeydown="if(event.key==='Enter') addOneName()">
        <button class="btn btn-primary" onclick="addOneName()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
      </div>
      <div style="margin-bottom: 12px;">
        <label>‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô (‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î = 1 ‡∏Ñ‡∏ô)</label>
        <textarea id="bulkInput" placeholder="‡∏ä‡∏∑‡πà‡∏≠ 1&#10;‡∏ä‡∏∑‡πà‡∏≠ 2&#10;‡∏ä‡∏∑‡πà‡∏≠ 3&#10;..."></textarea>
      </div>
      <button class="btn btn-primary" onclick="addBulk()" style="width:100%">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
    </div>

    <!-- Add prizes -->
    <div class="card">
      <div class="card-title">üéÅ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</div>
      <div id="prizeList"></div>
      <div class="input-row" style="margin-top:12px">
        <input type="text" id="prizeNameInput" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• ‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏µ‡πà 1">
        <input type="text" id="prizeDetailInput" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡πÄ‡∏ä‡πà‡∏ô ‡∏ö‡∏±‡∏ï‡∏£‡∏Å‡∏≥‡∏ô‡∏±‡∏• 1,000 ‡∏ö‡∏≤‡∏ó" style="flex:2">
        <button class="btn btn-primary" onclick="addPrize()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
      </div>
    </div>

    <!-- Participants display -->
    <div class="card">
      <div class="card-title" style="justify-content: space-between">
        <span>üìã ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° (<span id="countLabel">0</span> ‡∏Ñ‡∏ô)</span>
        <button class="btn btn-danger" onclick="clearAll()" style="padding:6px 14px; font-size:13px">üóë ‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
      </div>
      <div id="participantsList">
        <div class="empty-state"><span class="emoji">üë§</span>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠<br>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢</div>
      </div>
    </div>

  </div>

  <!-- DRAW PANEL -->
  <div class="panel" id="panel-draw">

    <!-- Stats -->
    <div class="stats-row">
      <div class="stat-box">
        <div class="stat-num gold" id="statTotal">0</div>
        <div class="stat-label">‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
      </div>
      <div class="stat-box">
        <div class="stat-num green" id="statRemaining">0</div>
        <div class="stat-label">‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</div>
      </div>
      <div class="stat-box">
        <div class="stat-num red" id="statWon">0</div>
        <div class="stat-label">‡πÑ‡∏î‡πâ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÅ‡∏•‡πâ‡∏ß</div>
      </div>
    </div>

    <div class="card">
      <div class="card-title">üéÅ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡∏∏‡πà‡∏°</div>
      <div class="prize-selector" id="prizeSelector">
        <div style="color: var(--muted); font-size:14px">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• ‚Äî ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πá‡∏ö "‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤"</div>
      </div>
    </div>

    <div class="draw-section">
      <div class="slot-display">
        <div class="slot-text" id="slotText">
          <span class="slot-idle">‚ú® ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏∏‡πà‡∏°</span>
        </div>
      </div>
      <button class="btn btn-gold" id="drawBtn" onclick="startDraw()">üé∞ ‡∏™‡∏∏‡πà‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•!</button>
    </div>

  </div>

  <!-- WINNERS PANEL -->
  <div class="panel" id="panel-winners">
    <div class="card">
      <div class="card-title" style="justify-content:space-between">
        <span>üèÜ ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ</span>
        <button class="btn btn-danger" onclick="clearWinners()" style="padding:6px 14px; font-size:13px">üóë ‡∏•‡πâ‡∏≤‡∏á</button>
      </div>
      <div id="winnersList">
        <div class="empty-state"><span class="emoji">üèÜ</span>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ<br>‡πÑ‡∏õ‡∏™‡∏∏‡πà‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏¢!</div>
      </div>
    </div>
  </div>

</div>

<script>
  // ===== STATE =====
  let participants = [];
  let prizes = [
    { name: '‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏µ‡πà 1', detail: '‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÉ‡∏´‡∏ç‡πà' },
    { name: '‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏µ‡πà 2', detail: '‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏£‡∏≠‡∏á‡∏ä‡∏ô‡∏∞‡πÄ‡∏•‡∏¥‡∏®' },
    { name: '‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏µ‡πà 3', detail: '‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ä‡∏°‡πÄ‡∏ä‡∏¢' },
  ];
  let winners = [];
  let wonSet = new Set();
  let selectedPrize = 0;
  let isDrawing = false;

  // ===== INIT =====
  function init() {
    renderPrizeList();
    renderPrizeSelector();
    renderParticipants();
    updateStats();
  }

  // ===== TABS =====
  function switchTab(tab) {
    document.querySelectorAll('.tab').forEach((t,i) => {
      t.classList.toggle('active', ['setup','draw','winners'][i] === tab);
    });
    document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
    document.getElementById('panel-'+tab).classList.add('active');
    if (tab === 'draw') { updateStats(); renderPrizeSelector(); }
    if (tab === 'winners') renderWinners();
  }

  // ===== PARTICIPANTS =====
  function addOneName() {
    const input = document.getElementById('nameInput');
    const name = input.value.trim();
    if (!name) return;
    participants.push({ name, id: Date.now() + Math.random() });
    input.value = '';
    renderParticipants();
    updateStats();
  }

  function addBulk() {
    const text = document.getElementById('bulkInput').value.trim();
    if (!text) return;
    const names = text.split('\n').map(n => n.trim()).filter(n => n);
    names.forEach(name => participants.push({ name, id: Date.now() + Math.random() }));
    document.getElementById('bulkInput').value = '';
    renderParticipants();
    updateStats();
  }

  function removeParticipant(id) {
    participants = participants.filter(p => p.id !== id);
    wonSet.delete(id);
    renderParticipants();
    updateStats();
  }

  function clearAll() {
    if (!confirm('‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?')) return;
    participants = [];
    wonSet.clear();
    renderParticipants();
    updateStats();
  }

  function renderParticipants() {
    const el = document.getElementById('participantsList');
    document.getElementById('countLabel').textContent = participants.length;
    if (!participants.length) {
      el.innerHTML = '<div class="empty-state"><span class="emoji">üë§</span>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠<br>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢</div>';
      return;
    }
    el.innerHTML = '<div class="participants-grid">' +
      participants.map(p => `
        <div class="participant-chip ${wonSet.has(p.id) ? 'won' : ''}">
          <span>${p.name}</span>
          <button class="remove-btn" onclick="removeParticipant(${p.id})">√ó</button>
        </div>
      `).join('') +
    '</div>';
  }

  // ===== PRIZES =====
  function addPrize() {
    const name = document.getElementById('prizeNameInput').value.trim();
    const detail = document.getElementById('prizeDetailInput').value.trim();
    if (!name) return;
    prizes.push({ name, detail });
    document.getElementById('prizeNameInput').value = '';
    document.getElementById('prizeDetailInput').value = '';
    renderPrizeList();
    renderPrizeSelector();
  }

  function removePrize(i) {
    prizes.splice(i, 1);
    if (selectedPrize >= prizes.length) selectedPrize = Math.max(0, prizes.length - 1);
    renderPrizeList();
    renderPrizeSelector();
  }

  function renderPrizeList() {
    const el = document.getElementById('prizeList');
    if (!prizes.length) { el.innerHTML = ''; return; }
    el.innerHTML = prizes.map((p, i) => `
      <div class="winner-item" style="margin-bottom:8px">
        <div class="winner-rank" style="color:var(--gold)">${i+1}</div>
        <div class="winner-info">
          <div class="winner-name">${p.name}</div>
          <div class="winner-prize">${p.detail || '-'}</div>
        </div>
        <button class="btn btn-danger" onclick="removePrize(${i})" style="padding:6px 12px; font-size:12px">‡∏•‡∏ö</button>
      </div>
    `).join('');
  }

  function renderPrizeSelector() {
    const el = document.getElementById('prizeSelector');
    if (!prizes.length) {
      el.innerHTML = '<div style="color: var(--muted); font-size:14px">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• ‚Äî ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πá‡∏ö "‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤"</div>';
      return;
    }
    el.innerHTML = prizes.map((p, i) => `
      <button class="prize-chip ${i === selectedPrize ? 'selected' : ''}" onclick="selectPrize(${i})">
        ${p.name}
      </button>
    `).join('');
  }

  function selectPrize(i) {
    selectedPrize = i;
    renderPrizeSelector();
  }

  // ===== STATS =====
  function updateStats() {
    document.getElementById('statTotal').textContent = participants.length;
    document.getElementById('statRemaining').textContent = participants.length - wonSet.size;
    document.getElementById('statWon').textContent = wonSet.size;
  }

  // ===== DRAW =====
  function startDraw() {
    if (isDrawing) return;
    const eligible = participants.filter(p => !wonSet.has(p.id));
    if (!eligible.length) {
      alert('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏¢‡∏π‡πà!');
      return;
    }
    if (!prizes.length) {
      alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Å‡πà‡∏≠‡∏ô!');
      return;
    }

    isDrawing = true;
    const btn = document.getElementById('drawBtn');
    btn.disabled = true;
    const slotEl = document.getElementById('slotText');

    // Rolling animation
    slotEl.className = 'slot-text rolling';
    let rollCount = 0;
    const maxRolls = 30 + Math.floor(Math.random() * 20);
    let speed = 80;

    const roll = () => {
      if (rollCount >= maxRolls) {
        // Pick winner
        const winner = eligible[Math.floor(Math.random() * eligible.length)];
        const prize = prizes[selectedPrize];

        slotEl.className = 'slot-text winner';
        slotEl.textContent = `üéâ ${winner.name}`;

        wonSet.add(winner.id);
        winners.unshift({
          participant: winner,
          prize: prize,
          time: new Date().toLocaleTimeString('th-TH')
        });

        // Confetti!
        launchConfetti();

        setTimeout(() => {
          isDrawing = false;
          btn.disabled = false;
          renderParticipants();
          updateStats();
        }, 2000);
        return;
      }

      const randomPerson = eligible[Math.floor(Math.random() * eligible.length)];
      slotEl.textContent = randomPerson.name;
      rollCount++;
      // Slow down near end
      if (rollCount > maxRolls * 0.7) speed = 80 + (rollCount - maxRolls * 0.7) * 12;
      setTimeout(roll, speed);
    };
    roll();
  }

  // ===== CONFETTI =====
  function launchConfetti() {
    const colors = ['#f5c518','#7c4dff','#e040fb','#00e676','#ff5252','#40c4ff','#ff6d00'];
    const container = document.getElementById('confettiContainer');
    for (let i = 0; i < 80; i++) {
      setTimeout(() => {
        const piece = document.createElement('div');
        piece.className = 'confetti-piece';
        piece.style.cssText = `
          left: ${Math.random() * 100}vw;
          background: ${colors[Math.floor(Math.random() * colors.length)]};
          width: ${6 + Math.random() * 10}px;
          height: ${6 + Math.random() * 10}px;
          animation-duration: ${1.5 + Math.random() * 2}s;
          animation-delay: ${Math.random() * 0.5}s;
          border-radius: ${Math.random() > 0.5 ? '50%' : '2px'};
          opacity: ${0.7 + Math.random() * 0.3};
        `;
        container.appendChild(piece);
        setTimeout(() => piece.remove(), 3000);
      }, i * 20);
    }
  }

  // ===== WINNERS =====
  function renderWinners() {
    const el = document.getElementById('winnersList');
    if (!winners.length) {
      el.innerHTML = '<div class="empty-state"><span class="emoji">üèÜ</span>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ<br>‡πÑ‡∏õ‡∏™‡∏∏‡πà‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏¢!</div>';
      return;
    }
    const badgeClass = i => i === 0 ? 'badge-gold' : i === 1 ? 'badge-silver' : 'badge-bronze';
    const rankEmoji = i => ['ü•á','ü•à','ü•â'][i] || `#${i+1}`;
    el.innerHTML = '<div class="winners-list">' +
      winners.map((w, i) => `
        <div class="winner-item">
          <div class="winner-rank">${rankEmoji(winners.length - 1 - i)}</div>
          <div class="winner-info">
            <div class="winner-name">${w.participant.name}</div>
            <div class="winner-prize">üéÅ ${w.prize.name}${w.prize.detail ? ' ‚Äî ' + w.prize.detail : ''}</div>
          </div>
          <div style="text-align:right">
            <div class="badge ${badgeClass(winners.length - 1 - i)}">${w.prize.name}</div>
            <div class="winner-time" style="margin-top:4px">${w.time}</div>
          </div>
        </div>
      `).join('') +
    '</div>';
  }

  function clearWinners() {
    if (!confirm('‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ‡πÅ‡∏•‡∏∞‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?')) return;
    winners = [];
    wonSet.clear();
    renderWinners();
    renderParticipants();
    updateStats();
    document.getElementById('slotText').innerHTML = '<span class="slot-idle">‚ú® ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏∏‡πà‡∏°</span>';
  }

  init();
</script>
</body>
</html>
